---
layout: post
title: "함수형 인터페이스 종류(2)"
subtitle: "Predicate, Operator"
date: 2021-03-20 19:00:00 +0900
background: '/img/posts/01.jpg'
categories: ['java']
---

# 함수형 인터페이스 종류(2)

저번 포스팅에서 못 다 정리한 **Predicate 와 Operator**에 대해 알아보자

<br>

### Predicate\<T>
- T 타입을 받아서 boolean을 리턴하는 함수 인터페이스

~~~java
package java.util.function;

import java.util.Objects;

@FunctionalInterface
public interface Predicate<T> {

    boolean test(T t);

    default Predicate<T> and(Predicate<? super T> other) {
        Objects.requireNonNull(other);
        return (t) -> test(t) && other.test(t);
    }

    default Predicate<T> negate() {
        return (t) -> !test(t);
    }

    default Predicate<T> or(Predicate<? super T> other) {
        Objects.requireNonNull(other);
        return (t) -> test(t) || other.test(t);
    }

    static <T> Predicate<T> isEqual(Object targetRef) {
        return (null == targetRef)
                ? Objects::isNull
                : object -> targetRef.equals(object);
    }
}
~~~

<br>

boolean test(T t)

~~~java
Predicate<Integer> justOne = num -> num == 1;
System.out.println(justOne.test(1));
System.out.println(justOne.test(2));
~~~
~~~
true
false
~~~

<br>

and, or, negate
~~~java
Predicate<Integer> justOne = num -> num == 1;
Predicate<Integer> justTwo = num -> num == 2;
Predicate<Integer> justOdd = num -> num % 2 != 0;
Predicate<Integer> justEven = num -> num % 2 == 0;

System.out.println("justTwo.test(1) = " + justTwo.test(1));
System.out.println("justTwo.test(2) = " + justTwo.test(2));
System.out.println("justTwo.and(justOdd).test(1) = " + justTwo.and(justOdd).test(1));
System.out.println("justTwo.and(justEven).test(2) = " + justTwo.and(justEven).test(2));
System.out.println("justTwo.or(justOdd).test(1) = " + justTwo.or(justOdd).test(1));
System.out.println("justTwo.or(justEven).test(2) = " + justTwo.or(justEven).test(2));
System.out.println("justTwo.negate().test(1) = " + justTwo.negate().test(1));
System.out.println("justTwo.negate().test(2) = " + justTwo.negate().test(2));
~~~
~~~
justTwo.test(1) = false
justTwo.test(2) = true
justTwo.and(justOdd).test(1) = false
justTwo.and(justEven).test(2) = true
justTwo.or(justOdd).test(1) = true
justTwo.or(justEven).test(2) = true
justTwo.negate().test(1) = true
justTwo.negate().test(2) = false
~~~

<br>

Predicate는 steam에서 대표적으로 **filter**에 쓰인다

filter의 내부로직은 다음과 같다. 
~~~java
/**
 * Returns a stream consisting of the elements of this stream that match
 * the given predicate.
 *
 * <p>This is an <a href="package-summary.html#StreamOps">intermediate
 * operation</a>.
 *
 * @param predicate a <a href="package-summary.html#NonInterference">non-interfering</a>,
 *                  <a href="package-summary.html#Statelessness">stateless</a>
 *                  predicate to apply to each element to determine if it
 *                  should be included
 * @return the new stream
 */
Stream<T> filter(Predicate<? super T> predicate);
~~~
~~~java
Predicate<Integer> justOne = num -> num == 1;
Stream<Integer> integerStream = Stream.of(1, 2);
Stream<Integer> filteredStream = integerStream.filter(justOne);

System.out.println("filtered Num = " + filteredStream.collect(Collectors.toList()));
~~~
~~~
filtered Num = [1]
~~~


### Operator

- UnaryOperator
UnaryOperator은 입력받은 파라미터 타입과 리턴 받는 타입이 동일한 Functional Interface입니다. 


<br>

- BinaryOperator


<br>

|종류|매개변수|반환값|특징|
|---|---|---|---|
|Consumer|O|X|추상메소드 제공
|Supplier|O|O|
|Function|O|O|주로 매개변수를 반환값 타입으로 변환 후 반환
|Operator|O|O|주로 매개변수를 연산 후 결과값 반환 역할
|Predicate|O|O|주로 매개변수를 조사한 후 논리값 반환 역할

1. Consumer : 매개변수O, 반환값X -> 추상메소드 제공.

2. Supplier : 매개변수X, 반환값O

3. Function : 매개변수O, 반환값O, 주로 매개변수를 반환값 타입으로 변환 후 반환

4. Operator : 매개변수O, 반환값O, 주로 매개변수를 연산 후 결과값 반환 역할

5. Predicate : 매개변수O, 반환값O, 주로 매개변수를 조사한 후 논리값 반환 역할

<table>
  <thead>
  <tr>
    <th scope="cols" width="20%" style="text-align: center;">종류</th>
    <th scope="cols" width="60%" style="text-align: center;">함수적 인터페이스</th>
    <th scope="cols" width="10%" style="text-align: center;">andThen()</th>
    <th scope="cols" width="10%" style="text-align: center;">compose()</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td scope="row" rowspan="2">Function</td>
    <td style="text-align: left;">Function</td>
    <td style="text-align: center;">O</td>
    <td style="text-align: center;">O</td>
  </tr>
  <tr>
    <td style="text-align: left;">BiFunction</td>
    <td style="text-align: center;">O</td>
    <td style="text-align: center;">X</td>
  </tr>
  <tr>
    <td scope="row" rowspan="5">Consumer</td>
    <td style="text-align: left;">Consumer</td>
    <td style="text-align: center;">O</td>
    <td style="text-align: center;">X</td>
  </tr>
  <tr>
    <td style="text-align: left;">BiConsumer</td>
    <td style="text-align: center;">O</td>
    <td style="text-align: center;">X</td>
  </tr>
  <tr>
    <td style="text-align: left;">DoubleConsumer</td>
    <td style="text-align: center;">O</td>
    <td style="text-align: center;">X</td>
  </tr>
  <tr>
    <td style="text-align: left;">IntConsumer</td>
    <td style="text-align: center;">O</td>
    <td style="text-align: center;">X</td>
  </tr>
  <tr>
    <td style="text-align: left;">LongConsumer</td>
    <td style="text-align: center;">O</td>
    <td style="text-align: center;">X</td>
  </tr>
  <tr>
    <td scope="row" rowspan="4">Operator</td>
    <td style="text-align: left;">BinaryOperator</td>
    <td style="text-align: center;">O</td>
    <td style="text-align: center;">X</td>
  </tr>
  <tr>
    <td style="text-align: left;">DoubleUnaryOperator</td>
    <td style="text-align: center;">O</td>
    <td style="text-align: center;">O</td>
  </tr>
  <tr>
    <td style="text-align: left;">IntUnaryOperator</td>
    <td style="text-align: center;">O</td>
    <td style="text-align: center;">O</td>
  </tr>
  <tr>
    <td style="text-align: left;">LongUnaryOperator</td>
    <td style="text-align: center;">O</td>
    <td style="text-align: center;">O</td>
  </tr>
  </tbody>
</table>

---

<br>

[Stream API 공부하러가기](/java/java8/2021/03/20/java8_04.html)